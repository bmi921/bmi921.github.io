---
title: "坂井演習"
slug: "sakai-ex"
date: "2025-05-12"
tags: ["Python","R","レポート","実験"]
---


[250425_2025%E5%B9%B4%E5%BA%A6%E6%B5%81%E9%80%9A%E6%83%85%E5%A0%B1%E5%B7%A5%E5%AD%A6%E6%BC%94%E7%BF%92_%E5%9D%82%E4%BA%95.pdf](https://prod-files-secure.s3.us-west-2.amazonaws.com/869ddd21-7f28-4904-ad9a-084764054f0f/bc9a7be6-fdbe-46c0-9ec8-51a449b6e738/250425_2025%E5%B9%B4%E5%BA%A6%E6%B5%81%E9%80%9A%E6%83%85%E5%A0%B1%E5%B7%A5%E5%AD%A6%E6%BC%94%E7%BF%92_%E5%9D%82%E4%BA%95.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB4664YUVZJQV%2F20250514%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250514T153326Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEF8aCXVzLXdlc3QtMiJGMEQCIDrkVTYGRW6If4B0DCiL86gWTQaTGqY1pRf3PPJGL4rSAiA6QyILUH7zsLn7HVoNqaC3hdhKJYs5QFfU6aV9TEOeWyr%2FAwgYEAAaDDYzNzQyMzE4MzgwNSIM3tuFndcTKCClXJChKtwDke1RUfxemMXQwoqpCVxvpfGIF4ul8SURJvWIY1obNI4g1O5tps3%2FdIJFIBkVFicGC4Y%2FKGAV8hFoxjPwracavR4llFbwn1sKyH52kfPq%2Fyngtc5egF0J5QYMecaebpXyKkuzBUS1lI97zzFmpjjznq9jriz3EYVRq719an3hs8kV7A3L5iqrIUenaI6VAt5RwQUsZRs9fCNkC5br6n94osMSGgzwbEW7Ecfig4Fj2EYpRU2COWdq3eMZiq24dUr7Rpyum%2F8rDN3eo%2FO1a5sobOrQo5LaH6boLstVgKyiM7sfR4NXdihwRQD8ctRWb%2ByQPQAnr0SyLJsp4cD0Y4s6%2BUy4sVu2cI%2Fs8bkE31Pcmd4%2FyP7MfFPmVLiIqLr0ZDCQZx4gRYKqkk%2B1tWqVZsVjEHQzrHBAnGg302ruuMZnOfXfyHfL4DXrYb1%2B1IU6XGnA1Zn6Jve1Ju4uZ7%2BwuFDqGkrOnhqwAO%2F%2FenHlk7e25FPysDI6kuW6cngBZLm2Jj3S%2BmASGYW8ZDaHn3%2Bn8qGu34WengNd5jxGmwNi%2B0KLs11VWsjAJLU8ZDt6vVBf2G2VWxGjhJn8HEMwb%2B6DMZE5r%2F4Zbhhd71wqd2c2s5Zpst8WbedQfA%2B83bPWo5sw7NaSwQY6pgE8LMYC%2BqIHGfhj83Ru6M63Ql%2Fq6%2BktmXQpJwGPWgGpwVVIfMjOcg1ZXrCdHkzj4A%2ByYm2UD3Mtv%2BVA8GFnLQkcAhIDRM0ocOB4mA1D6C8Ec64cjHq2U64SOaKmVK4FNR%2BgRU8H037Azt5yMGswVUGwiTGcVB%2B5OrhmyVnStBq7oRy5aR4%2FrrNfA3ydrtA2fseZ0Gl8lN21C6C9RTL70no80Ma68iGo&X-Amz-Signature=8f6e73c4022a7e0e484849f8433ada3361d600ef15d0940b5c0c5bb0e97367bd&X-Amz-SignedHeaders=host&x-id=GetObject)


[https://bmi921.github.io/](https://bmi921.github.io/)


[link_preview](https://github.com/bmi921/logistics-cluster-cvrp/blob/main/output/centers.csv)


## 結果


```python
=== 処理開始: クラスタ 1 ===
Number of vehicles: 7
Total distance of all routes: 405.658km
Total load of all routes: 305
✅GeoJSON saved to ../geojson/cluster01.geojson
=== 処理完了: クラスタ 1 ===


=== 処理開始: クラスタ 2 ===
Number of vehicles: 9
Total distance of all routes: 461.882km
Total load of all routes: 405
✅GeoJSON saved to ../geojson/cluster02.geojson
=== 処理完了: クラスタ 2 ===


=== 処理開始: クラスタ 3 ===
Number of vehicles: 18
Total distance of all routes: 635.59km
Total load of all routes: 883
✅GeoJSON saved to ../geojson/cluster03.geojson
=== 処理完了: クラスタ 3 ===


=== 処理開始: クラスタ 4 ===
Number of vehicles: 7
Total distance of all routes: 394.588km
Total load of all routes: 325
✅GeoJSON saved to ../geojson/cluster04.geojson
=== 処理完了: クラスタ 4 ===


=== 処理開始: クラスタ 5 ===
Number of vehicles: 6
Total distance of all routes: 343.381km
Total load of all routes: 270
✅GeoJSON saved to ../geojson/cluster05.geojson
=== 処理完了: クラスタ 5 ===


=== 処理開始: クラスタ 6 ===
Number of vehicles: 6
Total distance of all routes: 396.05km
Total load of all routes: 267
✅GeoJSON saved to ../geojson/cluster06.geojson
=== 処理完了: クラスタ 6 ===


=== 処理開始: クラスタ 7 ===
Number of vehicles: 16
Total distance of all routes: 557.478km
Total load of all routes: 772
✅GeoJSON saved to ../geojson/cluster07.geojson
=== 処理完了: クラスタ 7 ===


=== 処理開始: クラスタ 8 ===
Number of vehicles: 16
Total distance of all routes: 615.301km
Total load of all routes: 784
✅GeoJSON saved to ../geojson/cluster08.geojson
=== 処理完了: クラスタ 8 ===


=== 処理開始: クラスタ 9 ===
Number of vehicles: 12
Total distance of all routes: 582.113km
Total load of all routes: 551
✅GeoJSON saved to ../geojson/cluster09.geojson
=== 処理完了: クラスタ 9 ===


=== 処理開始: クラスタ 10 ===
Number of vehicles: 9
Total distance of all routes: 428.815km
Total load of all routes: 438
✅GeoJSON saved to ../geojson/cluster10.geojson
=== 処理完了: クラスタ 10 ===
```


## やること

- [ ] 各クラスターごとの営業所の位置きめる

・ 土地用途制限
・ 周辺の渋滞
・ 環境影響（走行距離など）
・ 近隣住民への影響・近隣住民からの苦情

- [ ] 輸送費求める
- [ ] 営業所の細かな位置を決める
- [ ] 営業所の設置費用と維持費を求める
- [ ] 総費用求める
- [ ] 優位性を示す案を出す
- [ ] スライドつくる
- [ ] みんなで発表する

### ortool+python+keplerで巡回セールスマン問題として解く


**いろんなツール**があるけど、無料で商用可能、速い、そこそこ現実的な制約をつけれるのはortools！


[https://developers.google.com/optimization/routing?hl=ja](https://developers.google.com/optimization/routing?hl=ja)


### どうやって緯度経度⇔平面座標に変換するの？


[https://qiita.com/sw1227/items/e7a590994ad7dcd0e8ab](https://qiita.com/sw1227/items/e7a590994ad7dcd0e8ab)


### 距離からどうやってトラックの輸送費を計算する？


直線距離→道路距離　に治すには1.3をかければ良いという論文（これで良さそう）


[https://www.jstage.jst.go.jp/article/journalcpij/18/0/18_43/_pdf](https://www.jstage.jst.go.jp/article/journalcpij/18/0/18_43/_pdf)


移動距離÷トラックの平均速度=トラックを輸送する時間


各トラックが動いている時間の総和×トラック燃費 = 輸送費


[link_preview](https://github.com/bmi921/logistics-cluster-cvrp)

