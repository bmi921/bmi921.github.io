---
title: "坂井演習"
slug: "sakai-ex"
date: "2025-05-12"
tags: ["Python","R","レポート","実験"]
---


[250425_2025%E5%B9%B4%E5%BA%A6%E6%B5%81%E9%80%9A%E6%83%85%E5%A0%B1%E5%B7%A5%E5%AD%A6%E6%BC%94%E7%BF%92_%E5%9D%82%E4%BA%95.pdf](https://prod-files-secure.s3.us-west-2.amazonaws.com/869ddd21-7f28-4904-ad9a-084764054f0f/bc9a7be6-fdbe-46c0-9ec8-51a449b6e738/250425_2025%E5%B9%B4%E5%BA%A6%E6%B5%81%E9%80%9A%E6%83%85%E5%A0%B1%E5%B7%A5%E5%AD%A6%E6%BC%94%E7%BF%92_%E5%9D%82%E4%BA%95.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466XLPHFY7L%2F20250515%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250515T130841Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEHUaCXVzLXdlc3QtMiJGMEQCIGUCv%2BiK1Wkcf8iI8esBF3DP40106tNouHFZyIO%2B6nAQAiA1RmLD%2FZ0%2B1gE7KnUxNQek2gLHP0783o8B%2B67e2OolDSr%2FAwgtEAAaDDYzNzQyMzE4MzgwNSIMW0hFxusvSU46Q2WfKtwDAVZD58d3hy3mtsOUoddq3CbX2iVkC%2FJTM5wj9S5K9cYT6v6MH8TfbF0wdxY%2B1SKl1FHPYjS5dXk1qWL65cQWtHh8YGwTXCsLPTH1EFHsjWwm7BXc3T5vzx7b6fJ4MMZ1R5XgEI3I%2FUzQW0TCLzaDHIZDBRY0%2FpgRm6wkKA8BgRzqy0Ch90uOMQpCsD692dW6Z5CzfCRUNtckSaTkfgzkjWiKVzWv5t7iHryKDY8E8qpMvNwpf8jLIaa0j%2BmstgxrF%2BRWJPgPzclHMQrR3nJ9G6G4KoNEMDU2Pq8tdsXe6OS%2FqflRN0KKCjcbiYBPIfWiAKPTxmooN6bqy1dXT2OG2wcKiKQlt1VaoNcvJ0nOnUabqSGqPXGSlCLSt7kzZGpagv5MouWOHP%2BK8EEmQ284aFfD4hX7duchiVIuuoX4xM30I0laCEwK2afCfV8h0eIgNAQKa5Jt%2F%2FiiQsVfMgeoeFgWleEkf9lTpwvwj4KvNRqQZdq96yNuF3hnb6UnnHjbkObAyvDQsq%2BtpG9B%2BN%2BhWGDAKywSD9TU3caA4jlPlMaZ0iQoK8QKFXcTu%2BsCCsv2omnpm0E0HsdPhKA05iSre%2FJZ8QCZrqYqwC89RAY%2BNIDLusOYYIG5cXYK544w27mXwQY6pgFawSU5CQtVtEKT6fkfP%2FAA4Mz1Gm2WyAhpIibErLt%2FHeJqM2umpdsbMKNk5X55yYoWVlNHXeRCTAOSyyrgtNAG9Znvet6pOp3nJvPCxM0TMeZma8ttXE9e9eRwBLZpojxnLLejTe5WPqi8%2B3Z3x8vTS13qcJVhx%2Fj1d8OpvEt4l%2BuIJB5qO90AOWo5YjOEw7T0htZ%2BVwsG26H2oq6PgFUHvwLH2Vwj&X-Amz-Signature=70b1ee31a66b2d7c052adb92b5b44005ff58b022727a6f2bedf9440d2d4b5c59&X-Amz-SignedHeaders=host&x-id=GetObject)


[https://bmi921.github.io/](https://bmi921.github.io/)


[link_preview](https://github.com/bmi921/logistics-cluster-cvrp/blob/main/output/centers.csv)


## 結果


```python
=== 処理開始: クラスタ 1 ===
Number of vehicles: 7
Total distance of all routes: 405.658km
Total load of all routes: 305
✅GeoJSON saved to ../geojson/cluster01.geojson
=== 処理完了: クラスタ 1 ===


=== 処理開始: クラスタ 2 ===
Number of vehicles: 9
Total distance of all routes: 461.882km
Total load of all routes: 405
✅GeoJSON saved to ../geojson/cluster02.geojson
=== 処理完了: クラスタ 2 ===


=== 処理開始: クラスタ 3 ===
Number of vehicles: 18
Total distance of all routes: 635.59km
Total load of all routes: 883
✅GeoJSON saved to ../geojson/cluster03.geojson
=== 処理完了: クラスタ 3 ===


=== 処理開始: クラスタ 4 ===
Number of vehicles: 7
Total distance of all routes: 394.588km
Total load of all routes: 325
✅GeoJSON saved to ../geojson/cluster04.geojson
=== 処理完了: クラスタ 4 ===


=== 処理開始: クラスタ 5 ===
Number of vehicles: 6
Total distance of all routes: 343.381km
Total load of all routes: 270
✅GeoJSON saved to ../geojson/cluster05.geojson
=== 処理完了: クラスタ 5 ===


=== 処理開始: クラスタ 6 ===
Number of vehicles: 6
Total distance of all routes: 396.05km
Total load of all routes: 267
✅GeoJSON saved to ../geojson/cluster06.geojson
=== 処理完了: クラスタ 6 ===


=== 処理開始: クラスタ 7 ===
Number of vehicles: 16
Total distance of all routes: 557.478km
Total load of all routes: 772
✅GeoJSON saved to ../geojson/cluster07.geojson
=== 処理完了: クラスタ 7 ===


=== 処理開始: クラスタ 8 ===
Number of vehicles: 16
Total distance of all routes: 615.301km
Total load of all routes: 784
✅GeoJSON saved to ../geojson/cluster08.geojson
=== 処理完了: クラスタ 8 ===


=== 処理開始: クラスタ 9 ===
Number of vehicles: 12
Total distance of all routes: 582.113km
Total load of all routes: 551
✅GeoJSON saved to ../geojson/cluster09.geojson
=== 処理完了: クラスタ 9 ===


=== 処理開始: クラスタ 10 ===
Number of vehicles: 9
Total distance of all routes: 428.815km
Total load of all routes: 438
✅GeoJSON saved to ../geojson/cluster10.geojson
=== 処理完了: クラスタ 10 ===
```


## やること

- [ ] 各クラスターごとの営業所の位置きめる

・ 土地用途制限
・ 周辺の渋滞
・ 環境影響（走行距離など）
・ 近隣住民への影響・近隣住民からの苦情

- [ ] 輸送費求める
- [ ] 営業所の細かな位置を決める
- [ ] 営業所の設置費用と維持費を求める
- [ ] 総費用求める
- [ ] 優位性を示す案を出す
- [ ] スライドつくる
- [ ] みんなで発表する

### ortool+python+keplerで巡回セールスマン問題として解く


**いろんなツール**があるけど、無料で商用可能、速い、そこそこ現実的な制約をつけれるのはortools！


[https://developers.google.com/optimization/routing?hl=ja](https://developers.google.com/optimization/routing?hl=ja)


### どうやって緯度経度⇔平面座標に変換するの？


[https://qiita.com/sw1227/items/e7a590994ad7dcd0e8ab](https://qiita.com/sw1227/items/e7a590994ad7dcd0e8ab)


### 距離からどうやってトラックの輸送費を計算する？


直線距離→道路距離　に治すには1.3をかければ良いという論文（これで良さそう）


[https://www.jstage.jst.go.jp/article/journalcpij/18/0/18_43/_pdf](https://www.jstage.jst.go.jp/article/journalcpij/18/0/18_43/_pdf)


移動距離÷トラックの平均速度=トラックを輸送する時間


各トラックが動いている時間の総和×トラック燃費 = 輸送費


[link_preview](https://github.com/bmi921/logistics-cluster-cvrp)

