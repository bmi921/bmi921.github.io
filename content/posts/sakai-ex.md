---
title: "坂井演習"
slug: "sakai-ex"
date: "2025-05-12"
tags: ["Python","R","レポート","実験"]
---


[250425_2025%E5%B9%B4%E5%BA%A6%E6%B5%81%E9%80%9A%E6%83%85%E5%A0%B1%E5%B7%A5%E5%AD%A6%E6%BC%94%E7%BF%92_%E5%9D%82%E4%BA%95.pdf](https://prod-files-secure.s3.us-west-2.amazonaws.com/869ddd21-7f28-4904-ad9a-084764054f0f/bc9a7be6-fdbe-46c0-9ec8-51a449b6e738/250425_2025%E5%B9%B4%E5%BA%A6%E6%B5%81%E9%80%9A%E6%83%85%E5%A0%B1%E5%B7%A5%E5%AD%A6%E6%BC%94%E7%BF%92_%E5%9D%82%E4%BA%95.pdf?X-Amz-Algorithm=AWS4-HMAC-SHA256&X-Amz-Content-Sha256=UNSIGNED-PAYLOAD&X-Amz-Credential=ASIAZI2LB466XZAXEHLC%2F20250514%2Fus-west-2%2Fs3%2Faws4_request&X-Amz-Date=20250514T150459Z&X-Amz-Expires=3600&X-Amz-Security-Token=IQoJb3JpZ2luX2VjEF8aCXVzLXdlc3QtMiJHMEUCIClBXz%2Fvmdi7ta45kdtnoep3YEaaWv99JGXLAFjkPNw9AiEA2eChCyZhl%2FgSlF40Nwwg0eb%2B9yZu4i0SzHbTWGNmX1Eq%2FwMIGBAAGgw2Mzc0MjMxODM4MDUiDMX8aDF9BzwKUITwYCrcA2Qgrg%2FckmP%2FlbF8cw7qK5FG1CMO6P2uibmjLkiQ5Ziz0M1ZRgGTQxkFhajMUTv3lVcOUxx1TRu0CIHNFjYSx%2BAjc9%2FFrHD82Netgga06CZSoszWJU3mr70eiF%2BIWqI41cPE%2BUxA%2BOUXvlsOuo4AHASGEFibWuZCvrSXee5pvVCwRJynifgf%2F2I2GjeNkg6tXqMgvrEeqJA0s4Y8%2BSel9QgNaiIkcZorxAursVUhMaMxpUFUn%2FjTJUv4dcmXED0y16HAVMr3sSyExl18hNYnNrmgrnHsFWNR1uEMnuNgUgtLt0vxfR%2FmPUoBlDmUGxW9Hg0y9puEgtLPRp01VRRT298athB6l79CvcHDQ8BKNK1mAXe1lmKOBFWbv1wgZs6dRrLwJ5G4lpdgb2g1ROpg7kSLgFvktZgkUHualU0chVqCitNsOW0UeFhebRB64lV3OuufIPh3ikA6m3%2B5LIyycfirnQYx54SsMB1NYZnbXdD1egKF1%2FxU9L1ANG2ywDwSJyd6aoIFuAzqwtnVQ2UoxGmDrMD22%2BtfE16g0isXPNIyDBjYqyja%2BwBjXdAj6xq4%2BEEa65wde3iPXeVd4zOSgJbQ%2FbvEBykJEGj6NyqWDh4x2YiNhEZo5Rx%2FVudqMIPWksEGOqUBozGZlq6WGlG1obDPazy3SKdKCG7OWrzHlIIRkdRXfjrbLl31pzGl%2FdTmVCAdrSV1v%2B967YrokgJzmyt1O2u3MDXjSCY%2FGIXBAYL89%2BpPOvvstabFjkcybLuBUF%2Fo4EOs%2BAcFKnViUbPi%2F%2BW3ue1%2F4slCcTXPtVUarCWIH%2Fkcdk%2BR4aLG1iHDRqRUc8dvNj1DzCuvV3xekNFLBBQbFB3%2Bt6kRM%2FIp&X-Amz-Signature=8167d9f1b9a786633979cbc4ec296819caaa23c731cbe0019cfa54b3a4878801&X-Amz-SignedHeaders=host&x-id=GetObject)


[https://bmi921.github.io/](https://bmi921.github.io/)


[link_preview](https://github.com/bmi921/logistics-cluster-cvrp/blob/main/output/centers.csv)


## 結果


```python
=== 処理開始: クラスタ 1 ===
Number of vehicles: 7
Total distance of all routes: 405.658km
Total load of all routes: 305
✅GeoJSON saved to ../geojson/cluster01.geojson
=== 処理完了: クラスタ 1 ===


=== 処理開始: クラスタ 2 ===
Number of vehicles: 9
Total distance of all routes: 461.882km
Total load of all routes: 405
✅GeoJSON saved to ../geojson/cluster02.geojson
=== 処理完了: クラスタ 2 ===


=== 処理開始: クラスタ 3 ===
Number of vehicles: 18
Total distance of all routes: 635.59km
Total load of all routes: 883
✅GeoJSON saved to ../geojson/cluster03.geojson
=== 処理完了: クラスタ 3 ===


=== 処理開始: クラスタ 4 ===
Number of vehicles: 7
Total distance of all routes: 394.588km
Total load of all routes: 325
✅GeoJSON saved to ../geojson/cluster04.geojson
=== 処理完了: クラスタ 4 ===


=== 処理開始: クラスタ 5 ===
Number of vehicles: 6
Total distance of all routes: 343.381km
Total load of all routes: 270
✅GeoJSON saved to ../geojson/cluster05.geojson
=== 処理完了: クラスタ 5 ===


=== 処理開始: クラスタ 6 ===
Number of vehicles: 6
Total distance of all routes: 396.05km
Total load of all routes: 267
✅GeoJSON saved to ../geojson/cluster06.geojson
=== 処理完了: クラスタ 6 ===


=== 処理開始: クラスタ 7 ===
Number of vehicles: 16
Total distance of all routes: 557.478km
Total load of all routes: 772
✅GeoJSON saved to ../geojson/cluster07.geojson
=== 処理完了: クラスタ 7 ===


=== 処理開始: クラスタ 8 ===
Number of vehicles: 16
Total distance of all routes: 615.301km
Total load of all routes: 784
✅GeoJSON saved to ../geojson/cluster08.geojson
=== 処理完了: クラスタ 8 ===


=== 処理開始: クラスタ 9 ===
Number of vehicles: 12
Total distance of all routes: 582.113km
Total load of all routes: 551
✅GeoJSON saved to ../geojson/cluster09.geojson
=== 処理完了: クラスタ 9 ===


=== 処理開始: クラスタ 10 ===
Number of vehicles: 9
Total distance of all routes: 428.815km
Total load of all routes: 438
✅GeoJSON saved to ../geojson/cluster10.geojson
=== 処理完了: クラスタ 10 ===
```


## やること

- [ ] 各クラスターごとの営業所の位置きめる

・ 土地用途制限
・ 周辺の渋滞
・ 環境影響（走行距離など）
・ 近隣住民への影響・近隣住民からの苦情

- [ ] 輸送費求める
- [ ] 営業所の細かな位置を決める
- [ ] 営業所の設置費用と維持費を求める
- [ ] 総費用求める
- [ ] 優位性を示す案を出す
- [ ] スライドつくる
- [ ] みんなで発表する

### ortool+python+keplerで巡回セールスマン問題として解く


**いろんなツール**があるけど、無料で商用可能、速い、そこそこ現実的な制約をつけれるのはortools！


[https://developers.google.com/optimization/routing?hl=ja](https://developers.google.com/optimization/routing?hl=ja)


### どうやって緯度経度⇔平面座標に変換するの？


[https://qiita.com/sw1227/items/e7a590994ad7dcd0e8ab](https://qiita.com/sw1227/items/e7a590994ad7dcd0e8ab)


### 距離からどうやってトラックの輸送費を計算する？


直線距離→道路距離　に治すには1.3をかければ良いという論文（これで良さそう）


[https://www.jstage.jst.go.jp/article/journalcpij/18/0/18_43/_pdf](https://www.jstage.jst.go.jp/article/journalcpij/18/0/18_43/_pdf)


移動距離÷トラックの平均速度=トラックを輸送する時間


各トラックが動いている時間の総和×トラック燃費 = 輸送費


[link_preview](https://github.com/bmi921/logistics-cluster-cvrp)

